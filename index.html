<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³ ë•ì´ˆ ë‚³ê¸° ê²Œì„</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonts-archive/DungGeunMo/DungGeunMo.css">
    <link href="https://fonts.googleapis.com/css2?family=Silkscreen:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        body {
            background-color: #ADD8E6;
            font-family: 'DungGeunMo', monospace;
            min-height: 100vh;
            position: relative;
            overflow: hidden;
            transition: background-color 0.5s ease;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        .container {
            text-align: center;
        }

        h1 {
            font-family: 'DungGeunMo', monospace;
            font-weight: bold;
            font-size: clamp(32px, 8vw, 80px);
            color: #FFFFFF;
            position: absolute;
            top: clamp(40px, 8vh, 80px);
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            padding: 0 10px;
            text-shadow:
                4px 4px 0 #000000,
                0 0 20px rgba(255, 255, 255, 0.6),
                0 0 40px rgba(173, 216, 230, 0.5);
            -webkit-text-stroke: 1px #000000;
            text-stroke: 1px #000000;
            animation: titleFloat 3s ease-in-out infinite;
        }

        @keyframes titleFloat {
            0%, 100% {
                transform: translateX(-50%) translateY(0px);
            }
            50% {
                transform: translateX(-50%) translateY(-10px);
            }
        }

        h1 span {
            display: inline-block;
            margin: 0 clamp(5px, 1vw, 10px);
        }

        .word1 {
            animation: moveDown 0.4s cubic-bezier(0.45, 0, 0.55, 1) infinite;
        }

        .word2 {
            animation: moveUp 0.4s cubic-bezier(0.45, 0, 0.55, 1) infinite;
        }

        .word3 {
            animation: moveDown 0.4s cubic-bezier(0.45, 0, 0.55, 1) infinite;
        }

        @keyframes moveDown {
            0%, 35% {
                transform: translateY(0);
            }
            40%, 60% {
                transform: translateY(15px);
            }
            65%, 100% {
                transform: translateY(0);
            }
        }

        @keyframes moveUp {
            0%, 35% {
                transform: translateY(0);
            }
            40%, 60% {
                transform: translateY(-15px);
            }
            65%, 100% {
                transform: translateY(0);
            }
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: clamp(10px, 2vh, 20px);
            align-items: center;
            position: absolute;
            bottom: clamp(40px, 8vh, 80px);
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 400px;
        }

        button {
            font-family: 'DungGeunMo', monospace;
            font-weight: bold;
            width: 100%;
            max-width: 250px;
            min-width: 180px;
            padding: clamp(15px, 2vh, 20px) clamp(20px, 4vw, 40px);
            font-size: clamp(14px, 2vw, 20px);
            background-color: #ADD8E6;
            color: #FFFFFF;
            border: clamp(3px, 0.5vw, 5px) solid #000000;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.1s ease;
            box-shadow: clamp(4px, 0.8vw, 6px) clamp(4px, 0.8vw, 6px) 0 #000000;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            transition: left 0.5s;
        }

        button:hover::before {
            left: 100%;
        }

        button:hover {
            background-color: #90C8E6;
            transform: translate(-3px, -3px);
            box-shadow: 9px 9px 0 #000000;
        }

        button:active {
            transform: translate(3px, 3px);
            box-shadow: 3px 3px 0 #000000;
        }

        #startGame {
            background-color: #90EE90;
        }

        #startGame:hover {
            background-color: #7FD87F;
        }

        #howToPlay {
            background-color: #FFB6C1;
        }

        #howToPlay:hover {
            background-color: #FFA0B0;
        }

        /* ê²Œì„ í™”ë©´ */
        #gameScreen {
            display: none;
            width: 100%;
            height: 100vh;
            position: relative;
        }

        #gameScreen.active {
            display: block;
        }

        .game-title {
            font-family: 'DungGeunMo', monospace;
            font-weight: bold;
            font-size: clamp(20px, 4vw, 48px);
            color: #FFFFFF;
            position: absolute;
            top: clamp(30px, 5vh, 80px);
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            text-align: center;
            text-shadow:
                3px 3px 0 #000000,
                0 0 20px rgba(255, 255, 255, 0.8),
                0 0 40px rgba(173, 216, 230, 0.5);
            -webkit-text-stroke: 1px #000000;
            text-stroke: 1px #000000;
            display: flex;
            justify-content: center;
            gap: clamp(10px, 3vw, 40px);
            flex-wrap: wrap;
            image-rendering: pixelated;
        }

        .game-title span {
            display: inline-block;
            min-width: clamp(80px, 15vw, 200px);
            text-align: center;
        }

        .arrow-buttons {
            position: absolute;
            left: clamp(10px, 3vw, 50px);
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: clamp(15px, 3vh, 30px);
            z-index: 300;
        }

        .arrow-btn {
            width: clamp(50px, 10vw, 80px);
            height: clamp(50px, 10vw, 80px);
            font-size: clamp(24px, 5vw, 40px);
            background-color: #FFFFFF;
            color: #000000;
            border: clamp(3px, 0.5vw, 5px) solid #000000;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.1s ease;
            box-shadow: clamp(4px, 0.8vw, 6px) clamp(4px, 0.8vw, 6px) 0 #000000;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .arrow-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            transition: left 0.5s;
        }

        .arrow-btn:hover::before {
            left: 100%;
        }

        .arrow-btn:hover {
            background-color: #FFE066;
            transform: translate(-3px, -3px);
            box-shadow: 9px 9px 0 #000000;
        }

        .arrow-btn:active {
            transform: translate(3px, 3px);
            box-shadow: 3px 3px 0 #000000;
        }

        #upBtn {
            background-color: #ADD8E6;
        }

        #upBtn:hover {
            background-color: #9BC8D6;
        }

        #downBtn {
            background-color: #FFB6C1;
        }

        #downBtn:hover {
            background-color: #FFA0B0;
        }

        .game-boxes {
            position: absolute;
            bottom: clamp(40px, 8vh, 80px);
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: clamp(10px, 2vw, 20px);
            flex-wrap: wrap;
            justify-content: center;
            max-width: 90%;
        }

        .game-box {
            width: clamp(60px, 12vw, 100px);
            height: clamp(60px, 12vw, 100px);
            background-color: #FFFFFF;
            border: clamp(3px, 0.5vw, 5px) solid #000000;
            border-radius: 0;
            box-shadow: clamp(3px, 0.6vw, 4px) clamp(3px, 0.6vw, 4px) 0 #000000;
            transition: all 0.1s ease;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .game-box.active {
            border: clamp(3px, 0.5vw, 5px) solid #FF0000;
            box-shadow:
                clamp(4px, 0.8vw, 6px) clamp(4px, 0.8vw, 6px) 0 #000000,
                0 0 20px rgba(255, 0, 0, 0.8),
                0 0 40px rgba(255, 0, 0, 0.5);
            transform: scale(1.15) translate(-2px, -2px);
            background-color: #FFF5F5;
        }

        .arrow-icon {
            opacity: 0;
            transform: scale(0);
            transition: all 0.2s ease;
            width: clamp(40px, 8vw, 60px);
            height: clamp(40px, 8vw, 60px);
        }

        .arrow-icon.show {
            opacity: 1;
            transform: scale(1);
        }

        .arrow-icon svg {
            width: 100%;
            height: 100%;
            fill: #555555;
            transition: transform 0.2s ease;
        }

        .arrow-icon.up svg {
            transform: rotate(0deg);
        }

        .arrow-icon.down svg {
            transform: rotate(180deg);
        }

        /* O í‘œì‹œ */
        #okaySign {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-family: 'DungGeunMo', monospace;
            font-weight: bold;
            font-size: clamp(100px, 30vw, 300px);
            color: #90EE90;
            z-index: 1500;
            opacity: 0;
            pointer-events: none;
            text-shadow:
                5px 5px 0 #000000,
                0 0 30px rgba(144, 238, 144, 0.8),
                0 0 60px rgba(144, 238, 144, 0.5);
            -webkit-text-stroke: clamp(2px, 0.5vw, 3px) #000000;
            text-stroke: clamp(2px, 0.5vw, 3px) #000000;
        }

        #okaySign.show {
            animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }

        #okaySign.hide {
            animation: bounceOut 0.3s ease-in forwards;
        }

        @keyframes bounceIn {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        @keyframes bounceOut {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
        }

        /* ì•„ê¸° ì´ë¯¸ì§€ */
        #babyImage {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: clamp(80px, 15vw, 150px);
            height: clamp(80px, 15vw, 150px);
            pointer-events: none;
            z-index: 500;
            opacity: 0;
            visibility: hidden;
        }

        #babyImage.show {
            visibility: visible;
        }

        #babyImage.fall {
            animation: fallDown 0.5s ease-in forwards;
        }

        #babyImage.rise {
            animation: riseUp 0.5s ease-out forwards;
        }

        @keyframes fallDown {
            0% {
                top: 50%;
                opacity: 1;
            }
            100% {
                top: 120%;
                opacity: 0;
            }
        }

        @keyframes riseUp {
            0% {
                top: 120%;
                opacity: 0;
            }
            100% {
                top: 50%;
                opacity: 1;
            }
        }

        /* ì‚¬ëŒ ì´ë¯¸ì§€ */
        .people-image {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: clamp(200px, 40vw, 450px);
            height: auto;
            max-height: 60vh;
            object-fit: contain;
            pointer-events: none;
            z-index: 400;
            transform-origin: center bottom;
            animation: kneeSquat 0.4s ease-in-out infinite;
        }

        @keyframes kneeSquat {
            0%, 100% {
                transform: translate(-50%, -50%) scaleY(1);
            }
            50% {
                transform: translate(-50%, -50%) scaleY(0.9);
            }
        }

        /* ì¹´ìš´íŠ¸ë‹¤ìš´ ì˜¤ë²„ë ˆì´ */
        #countdownOverlay {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        #countdownOverlay.active {
            display: flex;
        }

        .countdown-number {
            font-family: 'DungGeunMo', monospace;
            font-weight: bold;
            font-size: clamp(80px, 20vw, 200px);
            color: #FFFFFF;
            -webkit-text-stroke: clamp(2px, 0.4vw, 3px) #000000;
            text-stroke: clamp(2px, 0.4vw, 3px) #000000;
            text-shadow:
                5px 5px 0 #000000,
                0 0 30px rgba(255, 255, 255, 0.8),
                0 0 60px rgba(173, 216, 230, 0.6);
            animation: countdownBounce 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        @keyframes countdownBounce {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* ê²Œì„ ì˜¤ë²„ ì˜¤ë²„ë ˆì´ */
        #gameOverOverlay {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, rgba(20,0,0,0.9) 100%);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: clamp(20px, 5vh, 50px);
            padding: 20px;
            animation: fadeIn 0.5s ease;
        }

        #gameOverOverlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .gameover-text {
            font-family: 'DungGeunMo', monospace;
            font-weight: bold;
            font-size: clamp(40px, 10vw, 100px);
            color: #FF0000;
            -webkit-text-stroke: 1px #000000;
            text-stroke: 1px #000000;
            text-shadow:
                2px 2px 0 #000000,
                0 0 20px rgba(255, 0, 0, 0.8),
                0 0 40px rgba(255, 0, 0, 0.5);
            animation: gameOverPulse 1.5s ease-in-out infinite, gameOverShake 0.5s ease;
            letter-spacing: clamp(4px, 1vw, 8px);
            padding: 0 20px;
            text-align: center;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        @keyframes gameOverPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes gameOverShake {
            0%, 100% {
                transform: translateX(0) scale(1);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-10px) scale(1.02);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(10px) scale(1.02);
            }
        }

        .menu-button {
            font-family: 'DungGeunMo', monospace;
            font-weight: bold;
            width: 90%;
            max-width: 300px;
            min-width: 200px;
            padding: clamp(15px, 2vh, 20px) clamp(20px, 4vw, 40px);
            font-size: clamp(16px, 2.5vw, 24px);
            background-color: #ADD8E6;
            color: #FFFFFF;
            border: clamp(3px, 0.5vw, 5px) solid #000000;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.1s ease;
            box-shadow: clamp(4px, 0.8vw, 6px) clamp(4px, 0.8vw, 6px) 0 #000000;
            position: relative;
            overflow: hidden;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        .menu-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            transition: left 0.5s;
        }

        .menu-button:hover::before {
            left: 100%;
        }

        .menu-button:hover {
            background-color: #90C8E6;
            transform: translate(-3px, -3px);
            box-shadow: 9px 9px 0 #000000;
        }

        .menu-button:active {
            transform: translate(3px, 3px);
            box-shadow: 3px 3px 0 #000000;
        }

        .menu-button:first-of-type {
            background-color: #90EE90;
        }

        .menu-button:first-of-type:hover {
            background-color: #7FD87F;
        }

        .menu-button:last-of-type {
            background-color: #FFB6C1;
        }

        .menu-button:last-of-type:hover {
            background-color: #FFA0B0;
        }

        /* ê²Œì„ ë°©ë²• íŒì—… */
        #howToPlayPopup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            justify-content: center;
            align-items: center;
        }

        #howToPlayPopup.active {
            display: flex;
        }

        .popup-content {
            background-color: #ADD8E6;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            border-radius: 0;
            border: clamp(3px, 0.5vw, 5px) solid #000000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .popup-header {
            background: linear-gradient(180deg, #ADD8E6 0%, #90C8E6 100%);
            padding: clamp(15px, 3vh, 30px);
            text-align: center;
            border-bottom: clamp(3px, 0.5vw, 5px) solid #000000;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.3);
        }

        .popup-title {
            font-family: 'DungGeunMo', monospace;
            font-weight: bold;
            font-size: clamp(20px, 4vw, 36px);
            color: #FFFFFF;
            text-shadow:
                3px 3px 0 #000000,
                0 0 15px rgba(255, 255, 255, 0.8);
            -webkit-text-stroke: 1px #000000;
            text-stroke: 1px #000000;
            image-rendering: pixelated;
        }

        .popup-body {
            padding: clamp(20px, 4vw, 40px);
            overflow-y: auto;
            flex: 1;
            background-color: #ADD8E6;
        }

        .popup-page {
            display: none;
        }

        .popup-page.active {
            display: block;
        }

        .popup-page h2 {
            font-family: 'DungGeunMo', monospace;
            font-weight: bold;
            font-size: clamp(18px, 3vw, 28px);
            color: #FFFFFF;
            margin-bottom: clamp(10px, 2vh, 20px);
            image-rendering: pixelated;
        }

        .popup-page p {
            font-family: 'DungGeunMo', monospace;
            font-size: clamp(10px, 1.8vw, 14px);
            line-height: 1.8;
            color: #FFFFFF;
            margin-bottom: clamp(10px, 2vh, 15px);
            image-rendering: pixelated;
        }

        .popup-page ul {
            font-family: 'DungGeunMo', monospace;
            font-size: clamp(10px, 1.8vw, 14px);
            line-height: 2;
            color: #FFFFFF;
            margin-left: clamp(10px, 2vw, 20px);
            image-rendering: pixelated;
        }

        .popup-page .highlight {
            background-color: #FFE066;
            padding: 2px 6px;
            border-radius: 0;
            font-weight: bold;
            color: #000000;
            text-shadow: none;
            -webkit-text-stroke: 0;
            text-stroke: 0;
        }

        .popup-footer {
            background-color: #90C8E6;
            padding: clamp(15px, 2vh, 20px);
            border-top: clamp(2px, 0.4vw, 3px) solid #000000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
        }

        .popup-nav-button {
            font-family: 'DungGeunMo', monospace;
            font-weight: bold;
            padding: clamp(10px, 1.5vh, 12px) clamp(15px, 3vw, 30px);
            font-size: clamp(12px, 2vw, 18px);
            background-color: #ADD8E6;
            color: #FFFFFF;
            border: clamp(2px, 0.4vw, 4px) solid #000000;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.1s ease;
            box-shadow: clamp(3px, 0.6vw, 4px) clamp(3px, 0.6vw, 4px) 0 #000000;
        }

        .popup-nav-button:hover {
            background-color: #90C8E6;
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0 #000000;
        }

        .popup-nav-button:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 #000000;
        }

        .popup-nav-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: translate(0, 0);
            box-shadow: 4px 4px 0 #000000;
        }

        .popup-page-indicator {
            font-family: 'DungGeunMo', monospace;
            font-size: clamp(12px, 2vw, 16px);
            color: #FFFFFF;
            image-rendering: pixelated;
        }

        .popup-close {
            position: absolute;
            top: clamp(10px, 2vh, 20px);
            right: clamp(10px, 2vw, 20px);
            width: clamp(30px, 5vw, 40px);
            height: clamp(30px, 5vw, 40px);
            background-color: #FF0000;
            color: #FFFFFF;
            border: clamp(2px, 0.4vw, 4px) solid #000000;
            border-radius: 0;
            font-size: clamp(18px, 3vw, 24px);
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.1s ease;
            box-shadow: clamp(3px, 0.6vw, 4px) clamp(3px, 0.6vw, 4px) 0 #000000;
        }

        .popup-close:hover {
            background-color: #CC0000;
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0 #000000;
        }

        .popup-close:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 #000000;
        }

        /* í¬ë ˆë”§ */
        .credit {
            position: fixed;
            bottom: clamp(5px, 1vh, 10px);
            font-family: Arial, sans-serif;
            font-size: clamp(12px, 2.5vw, 20px);
            font-weight: bold;
            color: #FFFFFF;
            text-shadow:
                2px 2px 0 #000000,
                0 0 10px rgba(255, 255, 255, 0.5);
            -webkit-text-stroke: 0.5px #000000;
            text-stroke: 0.5px #000000;
            z-index: 100;
            image-rendering: pixelated;
            padding: 5px;
            max-width: 45%;
            word-wrap: break-word;
        }

        .credit-left {
            left: clamp(5px, 1vw, 15px);
        }

        .credit-right {
            right: clamp(5px, 1vw, 15px);
            text-align: right;
        }

        /* ì „ì²´í™”ë©´ ê¶Œì¥ í…ìŠ¤íŠ¸ */
        #fullscreenNotice {
            position: fixed;
            top: 15px;
            right: 15px;
            font-family: Arial, sans-serif;
            font-size: clamp(10px, 1.8vw, 16px);
            font-weight: bold;
            color: #FFFFFF;
            text-shadow:
                2px 2px 0 #000000,
                0 0 10px rgba(255, 255, 255, 0.6);
            -webkit-text-stroke: 0.5px #000000;
            text-stroke: 0.5px #000000;
            z-index: 100;
            image-rendering: pixelated;
            padding: 8px 12px;
            background-color: rgba(255, 102, 102, 0.7);
            border: 2px solid #000000;
            box-shadow: 3px 3px 0 #000000;
            animation: noticeFloat 2s ease-in-out infinite;
        }

        @keyframes noticeFloat {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-5px);
            }
        }

        #gameScreen.active ~ #fullscreenNotice {
            display: none;
        }

        /* ëª¨ë°”ì¼ ìµœì í™” */
        @media (max-width: 768px) {
            h1 {
                font-size: clamp(24px, 8vw, 48px);
                top: clamp(20px, 5vh, 40px);
            }

            .button-container {
                bottom: clamp(20px, 5vh, 40px);
            }

            .game-title {
                font-size: clamp(16px, 4vw, 32px);
                top: clamp(15px, 3vh, 30px);
            }

            .arrow-buttons {
                left: 5px;
                gap: 10px;
            }

            .arrow-btn {
                width: clamp(45px, 12vw, 70px);
                height: clamp(45px, 12vw, 70px);
                font-size: clamp(20px, 6vw, 32px);
            }

            .game-boxes {
                bottom: clamp(20px, 5vh, 40px);
                gap: clamp(8px, 2vw, 15px);
            }

            .game-box {
                width: clamp(50px, 15vw, 80px);
                height: clamp(50px, 15vw, 80px);
            }

            .people-image {
                width: clamp(180px, 50vw, 350px);
            }

            #okaySign {
                font-size: clamp(80px, 25vw, 200px);
            }

            .gameover-text {
                font-size: clamp(32px, 10vw, 60px);
            }

            .credit {
                font-size: clamp(6px, 1.5vw, 10px);
            }
        }

        /* ì‘ì€ ëª¨ë°”ì¼ ê¸°ê¸° (ê°€ë¡œ ëª¨ë“œ í¬í•¨) */
        @media (max-width: 480px) or (max-height: 500px) {
            h1 {
                font-size: clamp(20px, 7vw, 36px);
                top: 15px;
            }

            h1 span {
                margin: 0 5px;
            }

            .button-container {
                bottom: 15px;
                gap: 8px;
            }

            button {
                padding: 12px 20px;
                font-size: clamp(12px, 2vw, 16px);
            }

            .game-title {
                font-size: clamp(14px, 3.5vw, 24px);
                top: 10px;
                gap: 8px;
            }

            .game-title span {
                min-width: clamp(60px, 12vw, 150px);
            }

            .arrow-buttons {
                left: 3px;
                gap: 8px;
            }

            .arrow-btn {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .game-boxes {
                bottom: 15px;
                gap: 6px;
            }

            .game-box {
                width: clamp(45px, 18vw, 70px);
                height: clamp(45px, 18vw, 70px);
            }

            .people-image {
                width: clamp(150px, 60vw, 300px);
                max-height: 50vh;
            }

            #babyImage {
                width: clamp(60px, 12vw, 100px);
                height: clamp(60px, 12vw, 100px);
            }

            #okaySign {
                font-size: clamp(60px, 20vw, 150px);
            }

            .countdown-number {
                font-size: clamp(60px, 18vw, 150px);
            }

            .gameover-text {
                font-size: clamp(24px, 8vw, 48px);
                padding: 0 10px;
            }

            .menu-button {
                font-size: clamp(14px, 2.5vw, 20px);
                padding: 12px 20px;
                min-width: 150px;
            }

            .popup-content {
                width: 95%;
                max-height: 90vh;
            }

            .popup-page p,
            .popup-page ul {
                font-size: 10px;
                line-height: 1.6;
            }

            .credit {
                font-size: 6px;
                max-width: 48%;
            }
        }

        /* í„°ì¹˜ ë””ë°”ì´ìŠ¤ ìµœì í™” */
        @media (hover: none) and (pointer: coarse) {
            button,
            .arrow-btn,
            .menu-button,
            .popup-nav-button,
            .popup-close {
                min-height: 44px;
                min-width: 44px;
            }
        }

        /* ì „ì²´í™”ë©´ ë²„íŠ¼ */
        #fullscreenBtn {
            position: fixed;
            bottom: clamp(5px, 1vh, 10px);
            right: clamp(5px, 1vw, 15px);
            width: 50px;
            height: 50px;
            background-color: transparent;
            border: none;
            outline: none;
            border-radius: 0;
            cursor: pointer;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            transition: all 0.2s ease;
            font-family: 'DungGeunMo', monospace;
            color: #FFFFFF;
            text-shadow:
                2px 2px 0 #000000,
                -2px -2px 0 #000000,
                2px -2px 0 #000000,
                -2px 2px 0 #000000,
                0 0 10px rgba(255, 255, 255, 0.8);
            filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.5));
        }

        #fullscreenBtn:focus {
            outline: none;
        }

        #fullscreenBtn:hover {
            transform: scale(1.2);
            color: #FFE066;
            text-shadow:
                2px 2px 0 #000000,
                -2px -2px 0 #000000,
                2px -2px 0 #000000,
                -2px 2px 0 #000000,
                0 0 20px rgba(255, 224, 102, 1);
        }

        #fullscreenBtn:active {
            transform: scale(1.1);
        }

        /* ì „ì²´í™”ë©´ ëª¨ë“œì—ì„œ ìˆ¨ê¸°ê¸° */
        body.fullscreen-mode #fullscreenBtn {
            display: none;
        }

        /* ì „ì²´í™”ë©´ ê°€ë¡œëª¨ë“œ ìµœì í™” */
        body.fullscreen-mode {
            overflow: hidden;
        }

        @media (orientation: landscape) and (max-height: 600px) {
            body.fullscreen-mode h1 {
                font-size: clamp(28px, 5vh, 50px);
                top: 20px;
            }

            body.fullscreen-mode .button-container {
                bottom: 30px;
            }

            body.fullscreen-mode .game-title {
                font-size: clamp(24px, 4vh, 40px);
                top: 20px;
            }

            body.fullscreen-mode .arrow-buttons {
                left: 20px;
            }

            body.fullscreen-mode .game-boxes {
                bottom: 30px;
            }

            body.fullscreen-mode .people-image {
                width: clamp(250px, 35vh, 400px);
                max-height: 70vh;
            }
        }
    </style>
</head>
<body>
    <!-- ë¡œë”© í™”ë©´ -->
    <div id="loadingScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #ADD8E6; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; padding: 20px;">
        <div id="loadingText" style="font-family: 'DungGeunMo', monospace; font-size: clamp(24px, 6vw, 48px); color: #FFFFFF; text-shadow: 3px 0 0 #000000, -3px 0 0 #000000, 0 3px 0 #000000, 0 -3px 0 #000000; margin-bottom: clamp(15px, 3vh, 30px); text-align: center;">
            ë¡œë”© ì¤‘...
        </div>
        <div id="loadingBarContainer" style="width: clamp(150px, 40vw, 200px); height: clamp(15px, 3vh, 20px); border: 3px solid #000000; background-color: #FFFFFF; margin-bottom: clamp(15px, 3vh, 30px);">
            <div id="loadingBar" style="width: 0%; height: 100%; background-color: #FFE066; transition: width 0.1s linear;"></div>
        </div>
        <button id="startButton" style="display: none; font-family: 'DungGeunMo', monospace; font-weight: bold; font-size: clamp(16px, 2.5vw, 24px); padding: clamp(15px, 2vh, 20px) clamp(20px, 4vw, 40px); background-color: #FFFFFF; color: #000000; border: clamp(3px, 0.5vw, 4px) solid #000000; cursor: pointer; box-shadow: 4px 4px 0 #000000; transition: all 0.1s ease;" onmouseover="this.style.backgroundColor='#FFE066'; this.style.transform='translate(-2px, -2px)'; this.style.boxShadow='6px 6px 0 #000000';" onmouseout="this.style.backgroundColor='#FFFFFF'; this.style.transform='translate(0, 0)'; this.style.boxShadow='4px 4px 0 #000000';" onmousedown="this.style.transform='translate(2px, 2px)'; this.style.boxShadow='2px 2px 0 #000000';">
            í´ë¦­í•˜ì—¬ ì‹œì‘
        </button>
    </div>

    <!-- ì „ì²´í™”ë©´ ê¶Œì¥ ì•ˆë‚´ (ë©”ì¸í™”ë©´ì—ë§Œ í‘œì‹œ) -->
    <div id="fullscreenNotice">ì „ì²´í™”ë©´ì„ ê¶Œì¥í•©ë‹ˆë‹¤</div>

    <!-- ì „ì²´í™”ë©´ ë²„íŠ¼ -->
    <button id="fullscreenBtn" title="ì „ì²´í™”ë©´ (ê°€ë¡œëª¨ë“œ)">â›¶</button>

    <!-- Credits -->
    <div class="credit credit-left">ì‚¬ìš´ë“œì œê³µ:ìœ íŠœë²„ í–‰ë³µí•œí”¼ìë¹µë‹˜(ì°ìœ¼ë¡œ í—ˆë½ ë°›ìŒ)</div>
    <div class="credit credit-right">MADE BY YOUNGJIN</div>

    <audio id="bgMusic" loop>
        <source src="assets/main.mp3" type="audio/mpeg">
    </audio>

    <audio id="inGameMusic" loop>
        <source src="assets/inGame.mp3" type="audio/mpeg">
    </audio>

    <audio id="hoSound">
        <source src="assets/ho.mp3" type="audio/mpeg">
    </audio>

    <audio id="jjaSound">
        <source src="assets/jja.mp3" type="audio/mpeg">
    </audio>

    <audio id="okaySound">
        <source src="assets/okay.mp3" type="audio/mpeg">
    </audio>

    <!-- ë©”ì¸ í™”ë©´ -->
    <div class="container" id="mainScreen">
        <!-- ì‚¬ëŒ ì´ë¯¸ì§€ -->
        <img class="people-image" src="assets/people1.png" alt="people">

        <h1>
            <span class="word1">ê³ ë•ì´ˆ</span>
            <span class="word2">ë‚³ê¸°</span>
            <span class="word3">ê²Œì„</span>
        </h1>
        <div class="button-container">
            <button id="startGame">ê²Œì„ ì‹œì‘</button>
            <button id="howToPlay">ê²Œì„ ë°©ë²•</button>
        </div>
    </div>

    <!-- ê²Œì„ í™”ë©´ -->
    <div id="gameScreen">
        <div class="game-title" id="gameTitle">
            <span id="word1">-</span>
            <span id="word2">-</span>
            <span id="word3">-</span>
            <span id="word4">-</span>
        </div>

        <div class="arrow-buttons">
            <button class="arrow-btn" id="upBtn">â–²</button>
            <button class="arrow-btn" id="downBtn">â–¼</button>
        </div>

        <!-- ì‚¬ëŒ ì´ë¯¸ì§€ -->
        <img class="people-image" src="assets/people1.png" alt="people">

        <!-- ì•„ê¸° ì´ë¯¸ì§€ -->
        <img id="babyImage" src="assets/baby.png" alt="baby">

        <!-- O í‘œì‹œ -->
        <div id="okaySign">O</div>

        <div class="game-boxes">
            <div class="game-box">
                <div class="arrow-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 4l-8 8h6v8h4v-8h6z"/>
                    </svg>
                </div>
            </div>
            <div class="game-box">
                <div class="arrow-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 4l-8 8h6v8h4v-8h6z"/>
                    </svg>
                </div>
            </div>
            <div class="game-box">
                <div class="arrow-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 4l-8 8h6v8h4v-8h6z"/>
                    </svg>
                </div>
            </div>
            <div class="game-box">
                <div class="arrow-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 4l-8 8h6v8h4v-8h6z"/>
                    </svg>
                </div>
            </div>
        </div>

        <!-- ì¹´ìš´íŠ¸ë‹¤ìš´ ì˜¤ë²„ë ˆì´ -->
        <div id="countdownOverlay">
            <div class="countdown-number" id="countdownNumber">3</div>
        </div>

        <!-- ê²Œì„ ì˜¤ë²„ ì˜¤ë²„ë ˆì´ -->
        <div id="gameOverOverlay">
            <div class="gameover-text">í‹€ë ¸ìŠµë‹ˆë‹¤</div>
            <button class="menu-button" id="restartGame">ë‹¤ì‹œ ì‹œì‘ (R)</button>
            <button class="menu-button" id="backToMenu">ë©”ì¸ ë©”ë‰´ (M)</button>
        </div>
    </div>

    <!-- ê²Œì„ ë°©ë²• íŒì—… -->
    <div id="howToPlayPopup">
        <div class="popup-content">
            <button class="popup-close" id="closePopup">Ã—</button>

            <div class="popup-header">
                <div class="popup-title">ê²Œì„ ë°©ë²•</div>
            </div>

            <div class="popup-body">
                <!-- í˜ì´ì§€ 1: ê²Œì„ ì†Œê°œ -->
                <div class="popup-page active" data-page="1">
                    <h2>ğŸ® ê²Œì„ ì†Œê°œ</h2>
                    <p><span class="highlight">ê³ ë•ì´ˆ ë‚³ê¸° ê²Œì„</span>ì€ ë¦¬ë“¬ì— ë§ì¶° ì˜¬ë°”ë¥¸ íƒ€ì´ë°ì— í™”ì‚´í‘œ í‚¤ë¥¼ ëˆ„ë¥´ëŠ” ë¦¬ë“¬ ê²Œì„ì…ë‹ˆë‹¤!</p>
                    <p>í™”ë©´ ìƒë‹¨ì— ë‚˜íƒ€ë‚˜ëŠ” ë‹¨ì–´ë¥¼ ë³´ê³ , ë°•ìŠ¤ê°€ ê°•ì¡°ë  ë•Œ ì •í™•í•œ ì…ë ¥ì„ í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                    <p>ë°•ìëŠ” <span class="highlight">150 BPM</span> (400ms ê°„ê²©)ìœ¼ë¡œ ì§„í–‰ë˜ë©°, ë¼ìš´ë“œê°€ ì§„í–‰ë ìˆ˜ë¡ ë‚œì´ë„ê°€ ë†’ì•„ì§‘ë‹ˆë‹¤.</p>
                </div>

                <!-- í˜ì´ì§€ 2: ì¡°ì‘ ë°©ë²• -->
                <div class="popup-page" data-page="2">
                    <h2>âŒ¨ï¸ ì¡°ì‘ ë°©ë²•</h2>
                    <p><strong>í‚¤ë³´ë“œ ì¡°ì‘:</strong></p>
                    <ul>
                        <li><span class="highlight">â†‘ (ìœ„ í™”ì‚´í‘œ)</span></li>
                        <li><span class="highlight">â†“ (ì•„ë˜ í™”ì‚´í‘œ)</span></li>
                    </ul>
                    <p><strong>í™”ë©´ ë²„íŠ¼:</strong></p>
                    <ul>
                        <li>ì™¼ìª½ì— ìˆëŠ” <span class="highlight">â–²</span>ì™€ <span class="highlight">â–¼</span> ë²„íŠ¼ì„ í´ë¦­í•´ë„ ë©ë‹ˆë‹¤!</li>
                    </ul>
                    <p><strong>ê²Œì„ ì˜¤ë²„ ì‹œ:</strong></p>
                    <ul>
                        <li><span class="highlight">Rí‚¤</span> - ê²Œì„ ë‹¤ì‹œ ì‹œì‘</li>
                        <li><span class="highlight">Mí‚¤</span> - ë©”ì¸ ë©”ë‰´ë¡œ ì´ë™</li>
                    </ul>
                </div>

                <!-- í˜ì´ì§€ 3: ìœ„ í™”ì‚´í‘œ ë‹¨ì–´ -->
                <div class="popup-page" data-page="3">
                    <h2>â¬†ï¸ ìœ„ í™”ì‚´í‘œë¥¼ ëˆŒëŸ¬ì•¼ í•˜ëŠ” ë‹¨ì–´</h2>
                    <p>ë‹¤ìŒ ë‹¨ì–´ê°€ ë‚˜ì˜¤ë©´ ë°•ìŠ¤ê°€ ê°•ì¡°ë  ë•Œ <span class="highlight">ìœ„ í™”ì‚´í‘œ (â†‘)</span>ë¥¼ ëˆ„ë¥´ì„¸ìš”:</p>
                    <ul>
                        <li><span class="highlight">ì§œì‡í˜¸í•´</span></li>
                        <li><span class="highlight">ì…ì¥í•´</span></li>
                        <li><span class="highlight">ë“¤ì–´ê°€</span></li>
                        <li><span class="highlight">ì•„ë¬´ê±°ë‚˜í•´</span> âš ï¸ (ìœ„ ë˜ëŠ” ì•„ë˜ ë‘˜ ë‹¤ ê°€ëŠ¥)</li>
                    </ul>
                </div>

                <!-- í˜ì´ì§€ 4: ì•„ë˜ í™”ì‚´í‘œ & ì…ë ¥ ì•ˆí•¨ -->
                <div class="popup-page" data-page="4">
                    <h2>â¬‡ï¸ ì•„ë˜ í™”ì‚´í‘œ & â›” ì…ë ¥ ì•ˆí•¨</h2>
                    <p><strong>ì•„ë˜ í™”ì‚´í‘œë¥¼ ëˆŒëŸ¬ì•¼ í•˜ëŠ” ë‹¨ì–´:</strong></p>
                    <ul>
                        <li><span class="highlight">ë‚³ì•„</span></li>
                        <li><span class="highlight">í‡´ì¥í•´</span></li>
                        <li><span class="highlight">í˜¸ì‡ì§œí•´</span></li>
                        <li><span class="highlight">ì•„ë¬´ê±°ë‚˜í•´</span> âš ï¸ (ìœ„ ë˜ëŠ” ì•„ë˜ ë‘˜ ë‹¤ ê°€ëŠ¥)</li>
                    </ul>
                    <p><strong>ì•„ë¬´ê²ƒë„ ëˆ„ë¥´ë©´ ì•ˆ ë˜ëŠ” ë‹¨ì–´:</strong></p>
                    <ul>
                        <li><span class="highlight">ë‚³ì§€ë§ˆ</span> - ì…ë ¥í•˜ë©´ í‹€ë¦¼!</li>
                        <li><span class="highlight">ë“¤ì–´ê°€ì§€ë§ˆ</span> - ì…ë ¥í•˜ë©´ í‹€ë¦¼!</li>
                        <li><span class="highlight">-</span> (ë¹ˆì¹¸) - ì…ë ¥í•˜ë©´ í‹€ë¦¼!</li>
                    </ul>
                </div>

                <!-- í˜ì´ì§€ 5: ë‚œì´ë„ ì‹œìŠ¤í…œ -->
                <div class="popup-page" data-page="5">
                    <h2>ğŸ“ˆ ë‚œì´ë„ ì‹œìŠ¤í…œ</h2>
                    <p>ë¼ìš´ë“œê°€ ì§„í–‰ë ìˆ˜ë¡ ë‚œì´ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤!</p>
                    <p><strong>ë¼ìš´ë“œ 1-2 (ì‰¬ì›€):</strong></p>
                    <ul>
                        <li>ë‚³ì•„, ë“¤ì–´ê°€ ë‹¨ì–´ë§Œ ë“±ì¥</li>
                        <li>1~3ê°œ ëœë¤ ë°°ì¹˜</li>
                    </ul>
                    <p><strong>ë¼ìš´ë“œ 3-6 (ì¤‘ê°„):</strong></p>
                    <ul>
                        <li>ë‚³ì•„, ë“¤ì–´ê°€, ë‚³ì§€ë§ˆ, ë“¤ì–´ê°€ì§€ë§ˆ ë“±ì¥</li>
                        <li>1~3ê°œ ëœë¤ ë°°ì¹˜</li>
                    </ul>
                    <p><strong>ë¼ìš´ë“œ 7-9 (ì–´ë ¤ì›€):</strong></p>
                    <ul>
                        <li>ëª¨ë“  ë‹¨ì–´ ë“±ì¥! (í˜¸ì‡ì§œí•´, ì§œì‡í˜¸í•´, ì•„ë¬´ê±°ë‚˜í•´, ì…ì¥í•´, í‡´ì¥í•´ ë“±)</li>
                        <li>1~3ê°œ ëœë¤ ë°°ì¹˜</li>
                    </ul>
                    <p><strong>ë¼ìš´ë“œ 10+ (ë§¤ìš° ì–´ë ¤ì›€):</strong></p>
                    <ul>
                        <li>í—·ê°ˆë¦¬ëŠ” ë‹¨ì–´ë“¤ ìœ„ì£¼ë¡œ ë“±ì¥!</li>
                        <li><span class="highlight">ë¬´ì¡°ê±´ 3ê°œ ë°°ì¹˜</span> - ë¹ˆì¹¸ ì—†ìŒ!</li>
                        <li>ë°°ê²½ìƒ‰ì´ ì—°í•œ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€í•¨</li>
                    </ul>
                </div>
            </div>

            <div class="popup-footer">
                <button class="popup-nav-button" id="prevPage">â—€ ì´ì „</button>
                <div class="popup-page-indicator">
                    <span id="currentPage">1</span> / <span id="totalPages">5</span>
                </div>
                <button class="popup-nav-button" id="nextPage">ë‹¤ìŒ â–¶</button>
            </div>
        </div>
    </div>

    <script>
        const bgMusic = document.getElementById('bgMusic');
        const inGameMusic = document.getElementById('inGameMusic');
        const hoSound = document.getElementById('hoSound');
        const jjaSound = document.getElementById('jjaSound');
        const okaySound = document.getElementById('okaySound');
        let isGameStarting = false;
        let isGamePlaying = false;
        let currentPattern = []; // í˜„ì¬ ê²Œì„ íŒ¨í„´ ì €ì¥
        let roundCount = 0; // ë¼ìš´ë“œ ì¹´ìš´í„°
        let currentBoxIndex = -1; // í˜„ì¬ ê°•ì¡°ëœ ë°•ìŠ¤ ì¸ë±ìŠ¤
        let inputReceived = false; // í˜„ì¬ ë°•ìŠ¤ì—ì„œ ì…ë ¥ì„ ë°›ì•˜ëŠ”ì§€

        // interval ì €ì¥ ë³€ìˆ˜ë“¤
        let wordInterval = null;
        let highlightInterval = null;
        let allTimeouts = []; // setTimeout ID ì €ì¥

        // ë‹¨ì–´ë³„ ì •ë‹µ í‚¤ ì •ì˜
        const upWords = ['ì§œì‡í˜¸í•´', 'ì…ì¥í•´', 'ë“¤ì–´ê°€', 'ì•„ë¬´ê±°ë‚˜í•´'];
        const downWords = ['ë‚³ì•„', 'í‡´ì¥í•´', 'ì•„ë¬´ê±°ë‚˜í•´', 'í˜¸ì‡ì§œí•´'];
        const noInputWords = ['ê³ ë•ì´ˆ', 'ë‚³ì§€ë§ˆ', 'ë“¤ì–´ê°€ì§€ë§ˆ', '-'];

        // ëª¨ë“  intervalê³¼ timeout ì •ë¦¬ í•¨ìˆ˜
        function clearAllIntervals() {
            if(wordInterval) {
                clearInterval(wordInterval);
                wordInterval = null;
            }
            if(highlightInterval) {
                clearInterval(highlightInterval);
                highlightInterval = null;
            }
            // ëª¨ë“  timeout ì •ë¦¬
            allTimeouts.forEach(id => clearTimeout(id));
            allTimeouts = [];
        }

        // ê²Œì„ ì˜¤ë²„ ì²˜ë¦¬ í•¨ìˆ˜
        function gameOver() {
            isGamePlaying = false;

            // ëª¨ë“  interval ì •ë¦¬
            clearAllIntervals();

            // ëª¨ë“  ìŒì•… ì •ì§€
            bgMusic.pause();
            inGameMusic.pause();

            // ê²Œì„ ì˜¤ë²„ ì˜¤ë²„ë ˆì´ í‘œì‹œ
            document.getElementById('gameOverOverlay').classList.add('active');
        }

        // ì •ë‹µ ì²´í¬ í•¨ìˆ˜
        function checkAnswer(input) {
            if(currentBoxIndex < 0 || currentBoxIndex >= 4) return;
            if(inputReceived) return; // ì´ë¯¸ ì…ë ¥ë°›ì•˜ìœ¼ë©´ ë¬´ì‹œ

            const word = currentPattern[currentBoxIndex];
            let isCorrect = false;

            if(input === 'up') {
                isCorrect = upWords.includes(word);
            } else if(input === 'down') {
                isCorrect = downWords.includes(word);
            }

            if(isCorrect) {
                console.log('ì •ë‹µ!');
                inputReceived = true;
            } else {
                console.log('ì˜¤ë‹µ!');
                inputReceived = true;
                gameOver();
            }
        }

        // ëœë¤ íŒ¨í„´ ìƒì„±
        function generatePattern() {
            roundCount++;
            updateBackgroundColor(); // ë°°ê²½ìƒ‰ ì—…ë°ì´íŠ¸
            const pattern = ['-', '-', '-', '-'];

            // ì²« ë²ˆì§¸ëŠ” ë¬´ì¡°ê±´ "ê³ ë•ì´ˆ"
            pattern[0] = 'ê³ ë•ì´ˆ';

            // ë¼ìš´ë“œì— ë”°ë¼ ì‚¬ìš©í•  ë‹¨ì–´ ê²°ì •
            let availableWords = [];
            let wordCount = 1;

            if(roundCount <= 2) {
                // 1-2ë²ˆì§¸: ì‰¬ì›€
                availableWords = ['ë‚³ì•„', 'ë“¤ì–´ê°€'];
                wordCount = Math.floor(Math.random() * 3) + 1; // 1~3ê°œ
            } else if(roundCount <= 6) {
                // 3-6ë²ˆì§¸: ì¤‘ê°„
                availableWords = ['ë‚³ì•„', 'ë“¤ì–´ê°€', 'ë‚³ì§€ë§ˆ', 'ë“¤ì–´ê°€ì§€ë§ˆ'];
                wordCount = Math.floor(Math.random() * 3) + 1; // 1~3ê°œ
            } else if(roundCount <= 9) {
                // 7-9ë²ˆì§¸: ì–´ë ¤ì›€
                availableWords = ['ë‚³ì•„', 'ë“¤ì–´ê°€', 'ë‚³ì§€ë§ˆ', 'ë“¤ì–´ê°€ì§€ë§ˆ', 'í˜¸ì‡ì§œí•´', 'ì§œì‡í˜¸í•´', 'ì•„ë¬´ê±°ë‚˜í•´', 'ì…ì¥í•´', 'í‡´ì¥í•´'];
                wordCount = Math.floor(Math.random() * 3) + 1; // 1~3ê°œ
            } else {
                // 10ë²ˆì§¸ ì´ìƒ: ë§¤ìš° ì–´ë ¤ì›€
                availableWords = ['í˜¸ì‡ì§œí•´', 'ì§œì‡í˜¸í•´', 'ì•„ë¬´ê±°ë‚˜í•´', 'ì…ì¥í•´', 'í‡´ì¥í•´', 'ë‚³ì•„', 'ë‚³ì§€ë§ˆ', 'ë“¤ì–´ê°€', 'ë“¤ì–´ê°€ì§€ë§ˆ'];
                wordCount = 3; // ë¬´ì¡°ê±´ 3ê°œ
            }

            // 2, 3, 4ë²ˆì§¸ ìœ„ì¹˜ì— ëœë¤í•˜ê²Œ ë‹¨ì–´ ë°°ì¹˜
            const availablePositions = [1, 2, 3];

            for(let i = 0; i < wordCount && availablePositions.length > 0; i++) {
                // ëœë¤ ìœ„ì¹˜ ì„ íƒ
                const posIndex = Math.floor(Math.random() * availablePositions.length);
                const position = availablePositions[posIndex];

                // ëœë¤ ë‹¨ì–´ ì„ íƒ
                const word = availableWords[Math.floor(Math.random() * availableWords.length)];
                pattern[position] = word;

                // ì‚¬ìš©í•œ ìœ„ì¹˜ ì œê±°
                availablePositions.splice(posIndex, 1);
            }

            return pattern;
        }

        // íŒ¨í„´ì„ í™”ë©´ì— í‘œì‹œ
        function displayPattern(pattern) {
            document.getElementById('word1').textContent = pattern[0];
            document.getElementById('word2').textContent = pattern[1];
            document.getElementById('word3').textContent = pattern[2];
            document.getElementById('word4').textContent = pattern[3];
            currentPattern = pattern;
        }

        // ë°°ê²½ìƒ‰ ì—…ë°ì´íŠ¸
        function updateBackgroundColor() {
            if(roundCount <= 2) {
                // 1ë‹¨ê³„: ì—°í•œ íŒŒë€ìƒ‰
                document.body.style.backgroundColor = '#ADD8E6';
            } else if(roundCount <= 6) {
                // 2ë‹¨ê³„: ì—°í•œ ë³´ë¼ìƒ‰
                document.body.style.backgroundColor = '#E6D5FF';
            } else if(roundCount <= 9) {
                // 3ë‹¨ê³„: ì—°í•œ ë¶„í™ìƒ‰
                document.body.style.backgroundColor = '#FFD5E5';
            } else {
                // 4ë‹¨ê³„: ì—°í•œ ë¹¨ê°„ìƒ‰ (ë§¤ìš° ì–´ë ¤ì›€)
                document.body.style.backgroundColor = '#FFB8B8';
            }
        }

        // ë¡œë”© í™”ë©´ ì²˜ë¦¬
        window.addEventListener('load', function() {
            const loadingScreen = document.getElementById('loadingScreen');
            const loadingBar = document.getElementById('loadingBar');
            const loadingText = document.getElementById('loadingText');
            const loadingBarContainer = document.getElementById('loadingBarContainer');
            const startButton = document.getElementById('startButton');
            let progress = 0;

            // ë¡œë”© ë°” ì• ë‹ˆë©”ì´ì…˜
            const loadingInterval = setInterval(function() {
                progress += 10;
                loadingBar.style.width = progress + '%';

                if(progress >= 100) {
                    clearInterval(loadingInterval);

                    // ë¡œë”© ì™„ë£Œ í›„ ë²„íŠ¼ í‘œì‹œ
                    setTimeout(function() {
                        loadingText.textContent = 'ê²Œì„ ì¤€ë¹„ ì™„ë£Œ!';
                        loadingBarContainer.style.display = 'none';
                        startButton.style.display = 'block';
                    }, 200);
                }
            }, 100);

            // ì‹œì‘ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            startButton.addEventListener('click', function() {
                // ìŒì•… ì¬ìƒ ì‹œì‘
                bgMusic.play().then(function() {
                    console.log('ìŒì•… ì¬ìƒ ì„±ê³µ!');
                }).catch(function(error) {
                    console.log('ìŒì•… ì¬ìƒ ì‹¤íŒ¨:', error);
                });

                // ë¡œë”© í™”ë©´ í˜ì´ë“œì•„ì›ƒ
                loadingScreen.style.transition = 'opacity 0.5s ease';
                loadingScreen.style.opacity = '0';

                setTimeout(function() {
                    loadingScreen.style.display = 'none';
                }, 500);
            });
        });

        // í™”ì‚´í‘œ ì•„ì´ì½˜ í‘œì‹œ í•¨ìˆ˜
        function showArrowIcon(direction) {
            if(currentBoxIndex < 0 || currentBoxIndex >= 4) return;

            const boxes = document.querySelectorAll('.game-box');
            const currentBox = boxes[currentBoxIndex];
            const arrowIcon = currentBox.querySelector('.arrow-icon');

            // ë°©í–¥ í´ë˜ìŠ¤ ì œê±° í›„ ìƒˆë¡œ ì¶”ê°€
            arrowIcon.classList.remove('up', 'down');
            arrowIcon.classList.add(direction);

            // ì•„ì´ì½˜ í‘œì‹œ
            arrowIcon.classList.add('show');

            // ì•„ê¸° ì´ë¯¸ì§€ ì• ë‹ˆë©”ì´ì…˜
            const babyImage = document.getElementById('babyImage');
            babyImage.classList.remove('fall', 'rise');
            babyImage.classList.add('show');

            if(direction === 'down') {
                babyImage.classList.add('fall');
            } else if(direction === 'up') {
                babyImage.classList.add('rise');
            }

            // ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚˜ë©´ ì•„ê¸° ì´ë¯¸ì§€ ìˆ¨ê¸°ê¸°
            babyImage.addEventListener('animationend', function hideBaby() {
                babyImage.classList.remove('show', 'fall', 'rise');
                babyImage.removeEventListener('animationend', hideBaby);
            });
        }

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.addEventListener('keydown', function(e) {
            if(!isGamePlaying) return;

            // ê°•ì¡°ëœ ë°•ìŠ¤ê°€ ìˆëŠ”ì§€ í™•ì¸
            const activeBox = document.querySelector('.game-box.active');
            if(!activeBox) return;

            if(e.key === 'ArrowDown') {
                // ì•„ë˜ í™”ì‚´í‘œ - ho.mp3 ì¬ìƒ
                hoSound.currentTime = 0;
                hoSound.play();
                showArrowIcon('down');
                checkAnswer('down');
            } else if(e.key === 'ArrowUp') {
                // ìœ„ í™”ì‚´í‘œ - jja.mp3 ì¬ìƒ
                jjaSound.currentTime = 0;
                jjaSound.play();
                showArrowIcon('up');
                checkAnswer('up');
            }
        });

        document.getElementById('startGame').addEventListener('click', function(e) {
            // ê¸°ì¡´ interval ëª¨ë‘ ì •ë¦¬
            clearAllIntervals();

            // ê²Œì„ ì‹œì‘ í”Œë˜ê·¸ ì„¤ì •
            isGameStarting = true;

            // ë¼ìš´ë“œ ì¹´ìš´í„° ë¦¬ì…‹
            roundCount = 0;
            currentBoxIndex = -1;
            inputReceived = false;

            // ë‹¨ì–´ ë¦¬ì…‹
            document.getElementById('word1').textContent = '-';
            document.getElementById('word2').textContent = '-';
            document.getElementById('word3').textContent = '-';
            document.getElementById('word4').textContent = '-';

            // ë°•ìŠ¤ ê°•ì¡° ì œê±° ë° ì•„ì´ì½˜ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.game-box').forEach(box => {
                box.classList.remove('active');
                const icon = box.querySelector('.arrow-icon');
                icon.classList.remove('show', 'up', 'down');
            });

            // ì•„ê¸° ì´ë¯¸ì§€ ì´ˆê¸°í™”
            const babyImage = document.getElementById('babyImage');
            babyImage.classList.remove('show', 'fall', 'rise');

            // ë°°ê²½ìƒ‰ ë¦¬ì…‹
            document.body.style.backgroundColor = '#ADD8E6';

            // ë©”ì¸ ìŒì•… ì™„ì „íˆ ì •ì§€
            bgMusic.pause();
            bgMusic.currentTime = 0;

            // ë©”ì¸ í™”ë©´ ìˆ¨ê¸°ê¸°
            document.getElementById('mainScreen').style.display = 'none';

            // ì „ì²´í™”ë©´ ê¶Œì¥ ì•ˆë‚´ ìˆ¨ê¸°ê¸°
            document.getElementById('fullscreenNotice').style.display = 'none';

            // ê²Œì„ í™”ë©´ ë¨¼ì € í‘œì‹œ
            document.getElementById('gameScreen').classList.add('active');

            // ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘ (ìŒì•… êº¼ì§„ ìƒíƒœ)
            startCountdown();
        });

        function startCountdown() {
            const countdownOverlay = document.getElementById('countdownOverlay');
            const countdownNumber = document.getElementById('countdownNumber');

            // ë©”ì¸ ìŒì•… ì •ì§€
            bgMusic.pause();

            // ê²Œì„ ìŒì•… ì‹œì‘
            inGameMusic.currentTime = 0;
            inGameMusic.play();

            // ì¹´ìš´íŠ¸ë‹¤ìš´ ì˜¤ë²„ë ˆì´ í‘œì‹œ
            countdownOverlay.classList.add('active');

            let count = 3;
            countdownNumber.textContent = count;

            const countdownInterval = setInterval(function() {
                count--;

                if(count > 0) {
                    // ì• ë‹ˆë©”ì´ì…˜ ì¬ì‹¤í–‰ì„ ìœ„í•´ ìš”ì†Œ ì œê±° í›„ ë‹¤ì‹œ ì¶”ê°€
                    countdownNumber.style.animation = 'none';
                    setTimeout(function() {
                        countdownNumber.style.animation = '';
                        countdownNumber.textContent = count;
                    }, 10);
                } else if(count === 0) {
                    // "ì‹œì‘!" í‘œì‹œ
                    countdownNumber.style.animation = 'none';
                    setTimeout(function() {
                        countdownNumber.style.animation = '';
                        countdownNumber.textContent = 'ì‹œì‘!';
                    }, 10);
                } else {
                    clearInterval(countdownInterval);

                    // ì¹´ìš´íŠ¸ë‹¤ìš´ ì˜¤ë²„ë ˆì´ ìˆ¨ê¸°ê¸°
                    countdownOverlay.classList.remove('active');

                    // ì¹´ìš´íŠ¸ë‹¤ìš´ ìŒì•… ì •ì§€
                    inGameMusic.pause();
                    inGameMusic.currentTime = 0;

                    // ë©”ì¸ ìŒì•… ì¬ìƒ
                    bgMusic.currentTime = 0;
                    bgMusic.play();

                    // ê²Œì„ ì‹œì‘
                    isGamePlaying = true;
                    startBoxHighlight();
                }
            }, 390);
        }

        function startBoxHighlight() {
            const boxes = document.querySelectorAll('.game-box');

            function showWordsAndHighlight() {
                // ê²Œì„ì´ ì¤‘ë‹¨ë˜ì—ˆìœ¼ë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
                if(!isGamePlaying) return;

                // ê¸°ì¡´ interval ì •ë¦¬ (ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€)
                if(wordInterval) {
                    clearInterval(wordInterval);
                    wordInterval = null;
                }
                if(highlightInterval) {
                    clearInterval(highlightInterval);
                    highlightInterval = null;
                }

                // ìƒˆ íŒ¨í„´ ìƒì„±
                const pattern = generatePattern();
                currentPattern = pattern;

                // ì²« ë²ˆì§¸ ë‹¨ì–´ë¥¼ ì¦‰ì‹œ í‘œì‹œ
                document.getElementById('word1').textContent = pattern[0];

                // ë‚˜ë¨¸ì§€ ë‹¨ì–´ë“¤ì„ 390ms ê°„ê²©ìœ¼ë¡œ ìˆœì„œëŒ€ë¡œ í‘œì‹œ
                let wordIndex = 1;
                wordInterval = setInterval(function() {
                    // ê²Œì„ì´ ì¤‘ë‹¨ë˜ì—ˆìœ¼ë©´ interval ì •ë¦¬
                    if(!isGamePlaying) {
                        clearInterval(wordInterval);
                        wordInterval = null;
                        return;
                    }

                    if(wordIndex >= 4) {
                        clearInterval(wordInterval);
                        wordInterval = null;
                        return;
                    }

                    // í˜„ì¬ ë‹¨ì–´ í‘œì‹œ
                    document.getElementById('word' + (wordIndex + 1)).textContent = pattern[wordIndex];
                    wordIndex++;
                }, 390);

                // 1ì´ˆ í›„ ë°•ìŠ¤ ê°•ì¡° ì‹œì‘
                const timeoutId = setTimeout(function() {
                    // ê²Œì„ì´ ì¤‘ë‹¨ë˜ì—ˆìœ¼ë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
                    if(!isGamePlaying) return;
                    startBoxAnimation();
                }, 1000);
                allTimeouts.push(timeoutId);

                function startBoxAnimation() {
                    let currentBox = 0;

                    // ë°•ìŠ¤ë¥¼ ì°¨ë¡€ëŒ€ë¡œ ê°•ì¡°
                    highlightInterval = setInterval(function() {
                        // ê²Œì„ì´ ì¤‘ë‹¨ë˜ì—ˆìœ¼ë©´ interval ì •ë¦¬
                        if(!isGamePlaying) {
                            clearInterval(highlightInterval);
                            highlightInterval = null;
                            return;
                        }

                        // ëª¨ë“  ë°•ìŠ¤ ë‹¤ ê°•ì¡°í–ˆìœ¼ë©´
                        if(currentBox >= 4) {
                            clearInterval(highlightInterval);
                            highlightInterval = null;
                            // ëª¨ë“  ë°•ìŠ¤ ê°•ì¡° í•´ì œ ë° ì•„ì´ì½˜ ìˆ¨ê¸°ê¸°
                            boxes.forEach(box => {
                                box.classList.remove('active');
                                const icon = box.querySelector('.arrow-icon');
                                icon.classList.remove('show', 'up', 'down');
                            });

                            // ëª¨ë“  ë‹¨ì–´ ë¦¬ì…‹
                            document.getElementById('word1').textContent = '-';
                            document.getElementById('word2').textContent = '-';
                            document.getElementById('word3').textContent = '-';
                            document.getElementById('word4').textContent = '-';

                            // ë‹¤ì‹œ ë‹¨ì–´ í‘œì‹œ ë° ê°•ì¡° ì‹œì‘
                            showWordsAndHighlight();
                            return;
                        }

                        // ëª¨ë“  ë°•ìŠ¤ì—ì„œ active ì œê±° ë° ì•„ì´ì½˜ ìˆ¨ê¸°ê¸°
                        boxes.forEach(box => {
                            box.classList.remove('active');
                            const icon = box.querySelector('.arrow-icon');
                            icon.classList.remove('show');
                        });

                        // í˜„ì¬ ë°•ìŠ¤ ê°•ì¡°
                        boxes[currentBox].classList.add('active');

                        // í˜„ì¬ ë°•ìŠ¤ ì¸ë±ìŠ¤ ì—…ë°ì´íŠ¸ ë° ì…ë ¥ í”Œë˜ê·¸ ë¦¬ì…‹
                        currentBoxIndex = currentBox;
                        inputReceived = false;

                        // í˜„ì¬ ë‹¨ì–´ í™•ì¸
                        const word = currentPattern[currentBox];

                        // ì…ë ¥ ì²´í¬
                        const timeoutId = setTimeout(function() {
                            // ê²Œì„ì´ ì¤‘ë‹¨ë˜ì—ˆìœ¼ë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
                            if(!isGamePlaying) return;

                            let isCorrectAnswer = false;

                            if(noInputWords.includes(word)) {
                                // ì…ë ¥í•˜ë©´ ì•ˆ ë˜ëŠ” ë‹¨ì–´
                                if(!inputReceived) {
                                    console.log('ì •ë‹µ! (ì…ë ¥ ì—†ìŒ)');
                                    isCorrectAnswer = true;
                                } else {
                                    console.log('ì˜¤ë‹µ! (ì…ë ¥í•˜ë©´ ì•ˆë¨)');
                                    gameOver();
                                }
                            } else {
                                // ì…ë ¥í•´ì•¼ í•˜ëŠ” ë‹¨ì–´ (upWords ë˜ëŠ” downWords)
                                if(inputReceived) {
                                    console.log('ì •ë‹µ! (ì…ë ¥í•¨)');
                                    isCorrectAnswer = true;
                                } else {
                                    console.log('ì˜¤ë‹µ! (ì…ë ¥ ì•ˆí•¨)');
                                    gameOver();
                                }
                            }

                            // 4ë²ˆì§¸ ë°•ìŠ¤ì—ì„œ ì •ë‹µì´ë©´ O í‘œì‹œ (ì•½ê°„ì˜ ë”œë ˆì´ í›„)
                            if(isCorrectAnswer && currentBoxIndex === 3) {
                                const showOkayTimeout = setTimeout(function() {
                                    const okaySign = document.getElementById('okaySign');
                                    okaySign.classList.remove('hide');
                                    okaySign.classList.add('show');
                                    okaySound.currentTime = 0;
                                    okaySound.play();

                                    // 1.2ì´ˆ í›„ O í‘œì‹œ ìˆ¨ê¸°ê¸°
                                    const hideTimeout = setTimeout(function() {
                                        okaySign.classList.remove('show');
                                        okaySign.classList.add('hide');
                                    }, 1200);
                                    allTimeouts.push(hideTimeout);
                                }, 100);
                                allTimeouts.push(showOkayTimeout);
                            }
                        }, 250);
                        allTimeouts.push(timeoutId);

                        currentBox++;
                    }, 390);
                }
            }

            // ì²« ì‚¬ì´í´ ì‹œì‘
            showWordsAndHighlight();
        }

        // ê²Œì„ ë°©ë²• íŒì—… ì œì–´
        let currentPopupPage = 1;
        const totalPopupPages = 5;

        function updatePopupPage() {
            // ëª¨ë“  í˜ì´ì§€ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.popup-page').forEach(page => {
                page.classList.remove('active');
            });

            // í˜„ì¬ í˜ì´ì§€ í‘œì‹œ
            document.querySelector(`.popup-page[data-page="${currentPopupPage}"]`).classList.add('active');

            // í˜ì´ì§€ ë²ˆí˜¸ ì—…ë°ì´íŠ¸
            document.getElementById('currentPage').textContent = currentPopupPage;

            // ì´ì „/ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
            document.getElementById('prevPage').disabled = (currentPopupPage === 1);
            document.getElementById('nextPage').disabled = (currentPopupPage === totalPopupPages);
        }

        // ê²Œì„ ë°©ë²• ë²„íŠ¼
        document.getElementById('howToPlay').addEventListener('click', function() {
            currentPopupPage = 1;
            updatePopupPage();
            document.getElementById('howToPlayPopup').classList.add('active');
        });

        // íŒì—… ë‹«ê¸°
        document.getElementById('closePopup').addEventListener('click', function() {
            document.getElementById('howToPlayPopup').classList.remove('active');
        });

        // ì´ì „ í˜ì´ì§€
        document.getElementById('prevPage').addEventListener('click', function() {
            if(currentPopupPage > 1) {
                currentPopupPage--;
                updatePopupPage();
            }
        });

        // ë‹¤ìŒ í˜ì´ì§€
        document.getElementById('nextPage').addEventListener('click', function() {
            if(currentPopupPage < totalPopupPages) {
                currentPopupPage++;
                updatePopupPage();
            }
        });

        // íŒì—… ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('howToPlayPopup').addEventListener('click', function(e) {
            if(e.target === this) {
                this.classList.remove('active');
            }
        });

        // í™”ì‚´í‘œ ë²„íŠ¼ ì´ë²¤íŠ¸
        document.getElementById('upBtn').addEventListener('click', function() {
            if(!isGamePlaying) return;

            // ê°•ì¡°ëœ ë°•ìŠ¤ê°€ ìˆëŠ”ì§€ í™•ì¸
            const activeBox = document.querySelector('.game-box.active');
            if(!activeBox) return;

            // ìœ„ í™”ì‚´í‘œ - jja.mp3 ì¬ìƒ
            jjaSound.currentTime = 0;
            jjaSound.play();
            showArrowIcon('up');
            checkAnswer('up');
        });

        document.getElementById('downBtn').addEventListener('click', function() {
            if(!isGamePlaying) return;

            // ê°•ì¡°ëœ ë°•ìŠ¤ê°€ ìˆëŠ”ì§€ í™•ì¸
            const activeBox = document.querySelector('.game-box.active');
            if(!activeBox) return;

            // ì•„ë˜ í™”ì‚´í‘œ - ho.mp3 ì¬ìƒ
            hoSound.currentTime = 0;
            hoSound.play();
            showArrowIcon('down');
            checkAnswer('down');
        });

        // ë‹¤ì‹œ ì‹œì‘ í•¨ìˆ˜
        function restartGame() {
            // ëª¨ë“  interval ì •ë¦¬
            clearAllIntervals();

            // ê²Œì„ ì˜¤ë²„ ì˜¤ë²„ë ˆì´ ìˆ¨ê¸°ê¸°
            document.getElementById('gameOverOverlay').classList.remove('active');

            // ë¼ìš´ë“œ ì¹´ìš´í„° ë¦¬ì…‹
            roundCount = 0;
            currentBoxIndex = -1;
            inputReceived = false;

            // ë‹¨ì–´ ë¦¬ì…‹
            document.getElementById('word1').textContent = '-';
            document.getElementById('word2').textContent = '-';
            document.getElementById('word3').textContent = '-';
            document.getElementById('word4').textContent = '-';

            // ë°•ìŠ¤ ê°•ì¡° ì œê±° ë° ì•„ì´ì½˜ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.game-box').forEach(box => {
                box.classList.remove('active');
                const icon = box.querySelector('.arrow-icon');
                icon.classList.remove('show', 'up', 'down');
            });

            // ì•„ê¸° ì´ë¯¸ì§€ ì´ˆê¸°í™”
            const babyImage = document.getElementById('babyImage');
            babyImage.classList.remove('show', 'fall', 'rise');

            // ë°°ê²½ìƒ‰ ë¦¬ì…‹
            document.body.style.backgroundColor = '#ADD8E6';

            // ê²Œì„ ìŒì•… ì´ˆê¸°í™”
            inGameMusic.pause();
            inGameMusic.currentTime = 0;

            // ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
            isGameStarting = true;
            startCountdown();
        }

        // ë©”ì¸ ë©”ë‰´ë¡œ ê°€ëŠ” í•¨ìˆ˜
        function goToMainMenu() {
            // ëª¨ë“  interval ì •ë¦¬
            clearAllIntervals();

            // ê²Œì„ ì˜¤ë²„ ì˜¤ë²„ë ˆì´ ìˆ¨ê¸°ê¸°
            document.getElementById('gameOverOverlay').classList.remove('active');

            // ê²Œì„ í™”ë©´ ìˆ¨ê¸°ê¸°
            document.getElementById('gameScreen').classList.remove('active');

            // ë©”ì¸ í™”ë©´ í‘œì‹œ
            document.getElementById('mainScreen').style.display = 'block';

            // ì „ì²´í™”ë©´ ê¶Œì¥ ì•ˆë‚´ ë‹¤ì‹œ ë³´ì´ê¸°
            document.getElementById('fullscreenNotice').style.display = 'block';

            // ë°•ìŠ¤ ì•„ì´ì½˜ ëª¨ë‘ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.game-box').forEach(box => {
                const icon = box.querySelector('.arrow-icon');
                icon.classList.remove('show', 'up', 'down');
            });

            // ì•„ê¸° ì´ë¯¸ì§€ ì´ˆê¸°í™”
            const babyImage = document.getElementById('babyImage');
            babyImage.classList.remove('show', 'fall', 'rise');

            // ê²Œì„ ìƒíƒœ ì´ˆê¸°í™”
            isGameStarting = false;
            isGamePlaying = false;
            roundCount = 0;
            currentBoxIndex = -1;
            inputReceived = false;

            // ë°°ê²½ìƒ‰ ë¦¬ì…‹
            document.body.style.backgroundColor = '#ADD8E6';

            // ê²Œì„ ìŒì•… ì •ì§€
            inGameMusic.pause();
            inGameMusic.currentTime = 0;

            // ë©”ì¸ ìŒì•… ì²˜ìŒë¶€í„° ì¬ìƒ
            bgMusic.currentTime = 0;
            bgMusic.play();
        }

        // ë‹¤ì‹œ ì‹œì‘ ë²„íŠ¼ ì´ë²¤íŠ¸
        document.getElementById('restartGame').addEventListener('click', restartGame);

        // ë©”ì¸ ë©”ë‰´ ë²„íŠ¼ ì´ë²¤íŠ¸
        document.getElementById('backToMenu').addEventListener('click', goToMainMenu);

        // ê²Œì„ ì˜¤ë²„ í™”ë©´ í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        document.addEventListener('keydown', function(e) {
            // ê²Œì„ ì˜¤ë²„ í™”ë©´ì´ í™œì„±í™”ë˜ì–´ ìˆì„ ë•Œë§Œ
            const gameOverOverlay = document.getElementById('gameOverOverlay');
            if(!gameOverOverlay.classList.contains('active')) return;

            if(e.key === 'r' || e.key === 'R') {
                restartGame();
            } else if(e.key === 'm' || e.key === 'M') {
                goToMainMenu();
            }
        });

        // ì „ì²´í™”ë©´ ê¸°ëŠ¥
        const fullscreenBtn = document.getElementById('fullscreenBtn');

        fullscreenBtn.addEventListener('click', async function() {
            try {
                const elem = document.documentElement;

                // ì „ì²´í™”ë©´ ìš”ì²­
                if (elem.requestFullscreen) {
                    await elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) {
                    await elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) {
                    await elem.msRequestFullscreen();
                }

                // ê°€ë¡œ ëª¨ë“œ ê°•ì œ (ëª¨ë°”ì¼ ê¸°ê¸°)
                if (screen.orientation && screen.orientation.lock) {
                    try {
                        await screen.orientation.lock('landscape');
                    } catch (err) {
                        console.log('í™”ë©´ íšŒì „ ì ê¸ˆ ì‹¤íŒ¨:', err);
                    }
                }

                // fullscreen-mode í´ë˜ìŠ¤ ì¶”ê°€
                document.body.classList.add('fullscreen-mode');

            } catch (err) {
                console.log('ì „ì²´í™”ë©´ ì „í™˜ ì‹¤íŒ¨:', err);
                alert('ì „ì²´í™”ë©´ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.');
            }
        });

        // ì „ì²´í™”ë©´ ì¢…ë£Œ ê°ì§€
        document.addEventListener('fullscreenchange', function() {
            if (!document.fullscreenElement) {
                document.body.classList.remove('fullscreen-mode');
                // í™”ë©´ íšŒì „ ì ê¸ˆ í•´ì œ
                if (screen.orientation && screen.orientation.unlock) {
                    screen.orientation.unlock();
                }
            }
        });

        // ì›¹í‚· ë¸Œë¼ìš°ì €ìš©
        document.addEventListener('webkitfullscreenchange', function() {
            if (!document.webkitFullscreenElement) {
                document.body.classList.remove('fullscreen-mode');
                if (screen.orientation && screen.orientation.unlock) {
                    screen.orientation.unlock();
                }
            }
        });

        // ESC í‚¤ë¡œ ì „ì²´í™”ë©´ ì¢…ë£Œ
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.fullscreenElement) {
                document.exitFullscreen();
            }
        });
    </script>
</body>
</html>
